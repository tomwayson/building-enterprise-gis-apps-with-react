# Building an Application

In this workshop we'll scaffold a new application, add the Bootstrap UI library, and get the tests to pass. Along the way we'll learn about application configuration and how to install and use dependencies.

## Prerequisites

- [Git](https://git-scm.com/) - already installed on mac, windows users can download https://git-scm.com/download/win
* [Node >= 8.10](https://nodejs.org/) with NPM v5.2+

## Scaffold the application

### Create React App

**NOTE:** The command below will configure the application to use NPM as the package manager, and all the workshops use `npm` commands. If you have [yarn](https://yarnpkg.com/) installed and would prefer to use that for the remainder of the workshops, omit the `--use-npm` flag. It will be up to you to know and use the corresponding `yarn` commands (i.e. `yarn add` instead of `npm install --save`) when running the workshops.

- open a terminal to the root folder where you keep your projects and enter:
```shell
npx create-react-app enterprise-arcgis-app --use-npm
cd enterprise-arcgis-app
```

### Run the app
- in your terminal, enter
```shell
npm start
```

- open a browser to http://localhost:3000/
- open `src/App.js` and **replace** its contents with:

```jsx
import React from 'react';

function App() {
  return (
    <nav className="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
      <a className="navbar-brand" href="#">Enterprise ArcGIS App</a>
    </nav>
  );
}

export default App;
```

After saving those files your browser should the title instead of the React logo. However, it looks like plain text instead of a Bootstrap navigation menu.

#### Notes:
- [npx](https://www.npmjs.com/package/npx)
- [JSX](https://reactjs.org/docs/introducing-jsx.html)
- public files, compiled css & js

## Install Bootstrap

- stop app (`ctrl+C`)
- Follow [CRA instructions for adding bootstrap](https://create-react-app.dev/docs/adding-bootstrap/):
  - `npm install --save bootstrap`
- open `src/index.css` and **replace** its contents with:
```css
body {
  padding-top: 3.5rem;
}
```
- in `src/index.js` **insert** `import 'bootstrap/dist/css/bootstrap.min.css';` above `import './index.css';`
- start app (`npm start`)

The title now appears in a Bootstrap navigation menu.

#### Notes
- webpack lets us `import` local CSS files from JS
- node module resolution (i.e. importing from `'bootstrap'`)

## Get application title from config

### Set document title

- open `public/index.html`
- **replace** `<title>React App</title>` with `<title>Enterprise ArcGIS App</title>`

### Create and use an application config

- create a new `src/config/app.js` file with the following contents:

```js
export const title = 'Enterprise ArcGIS App';
```

- in `src/App.js`:
  - **insert** this line at the end of the `import` statements at the top of the file:
  ```js
  import { title } from './config/app';
  ```
  - **replace** `Enterprise ArcGIS App` with `{ title }`

The title now appears in the browser tab as well as in the navigation bar.

#### Notes:
- use config for shared values that don't change during the lifetime of the app
- if we planned to internationalize your app, we would have used [a library like react-intl or react-i18next](https://smddzcy.com/posts/2019-05-17/internationalization-in-react) instead of config for the title

## Get tests to pass

### Fix broken test

- stop app (`ctrl+C`)
- run the tests w/ `npm test`
- observe the line that's causing the test to fail
- open `src/App.test.js` and **replace** the `test() {}` block w/:

```js
test('renders the app title', () => {
  const { getByText } = render(<App />);
  const linkElement = getByText(/Enterprise ArcGIS App/i);
  expect(linkElement).toBeInTheDocument();
});
```

- verify that all tests pass

### Remove unused CRA files

- remove the files generated by CRA that we're not currently using:
  - `src/App.css`
  - `src/logo.svg`
- verify that tests still pass
- stop tests (`ctrl+C`)

#### Notes:
- [rendering tests](https://github.com/testing-library/react-testing-library)
- tests let us refactor (delete files) w/ confidence

## Next steps

In [Workshop 2: Components](2-components.md) we'll install a React implementation of Bootstrap to make the navigation menu interactive.
